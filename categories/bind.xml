<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/"><channel><title>Milosophical Me (bind)</title><link>http://milosophical.me/</link><description></description><language>en</language><lastBuildDate>Fri, 23 Jan 2015 22:36:08 GMT</lastBuildDate><generator>http://getnikola.com/</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Implementing a caching-only DNS on Debian</title><link>http://milosophical.me/blog/2012/01/11/implementing-a-caching-only-dns-on-debian.html</link><dc:creator>Mike Lockhart</dc:creator><description>&lt;p&gt;After 3 years of sticking with Novell, I recently switched away from openSUSE to &lt;a title="Debian GNU/Linux" href="http://www.debian.org" target="_blank"&gt;Debian&lt;/a&gt;. There are a few reasons why, but I won't bore you with them. So far I'm liking it. There are a few things to set up before I settle in, and one is slow DNS lookup.


&lt;!--more--&gt;



I described how and why to make a &lt;a title="Implementing a caching-only DNS on openSUSE" href="http://sinewalker.wordpress.com/2010/07/20/implementing-a-caching-only-dns-on-opensuse/"&gt;caching-only DNS on openSUSE&lt;/a&gt; in July 2010.  In Debian it's a little different:

&lt;/p&gt;&lt;ol&gt;
	&lt;li&gt;Install bind of course. The package is called &lt;em&gt;bind9 &lt;/em&gt;and installs itself as a service and starts automatically, no need to mess with runlevels:
         &lt;div&gt;
          &lt;code&gt;
# &lt;strong&gt;aptitude install bind9&lt;/strong&gt;


          &lt;/code&gt;
         &lt;/div&gt;
        &lt;/li&gt;
	&lt;li&gt;The config for bind in Debian is a subdirectory structure in &lt;code&gt;/etc/bind&lt;/code&gt;.  For a simple caching-only server, you leave /etc/bind/named.conf untouched and instead change &lt;code&gt;&lt;strong&gt;/etc/bind/named.conf.options&lt;/strong&gt;&lt;/code&gt; to have your &lt;em&gt;forwarders&lt;/em&gt;:
        &lt;div&gt;
          &lt;code&gt;
// MJL20120111 - Adding Google2, OpenDNS1, gateway

forwarders {
    8.8.4.4; 208.67.222.222; 192.168.1.1;
};


          &lt;/code&gt;
         &lt;/div&gt;
        &lt;/li&gt;
	&lt;li&gt;Restart bind to load the new configuration:
         &lt;div&gt;
          &lt;code&gt;
# &lt;strong&gt;service bind9 restart&lt;/strong&gt;


          &lt;/code&gt;
         &lt;/div&gt;
        &lt;/li&gt;
	&lt;li&gt;You will need to change your network to use the local bind. I used &lt;a title="NetworkManager's home page" href="http://projects.gnome.org/NetworkManager/"&gt;NetworkManager&lt;/a&gt; on the GNOME desktop, but you can just edit &lt;strong&gt;&lt;code&gt;/etc/resolv.conf&lt;/code&gt;&lt;/strong&gt;:
         &lt;div&gt;
          &lt;code&gt;
nameserver 127.0.0.1 #local bind


          &lt;/code&gt;
         &lt;/div&gt;
If you edit the file by hand, you'll have to restart the network somehow (haven't found out how yet, except with NetworkManager).&lt;/li&gt;
	&lt;li&gt;Done. Test it:
         &lt;div&gt;
          &lt;code&gt;
$ &lt;strong&gt;nslookup australia.gov.au&lt;/strong&gt;

Server:127.0.0.1

Address:127.0.0.1#53Non-authoritative answer:

Name:australia.gov.au

Address: 205.239.168.12


          &lt;/code&gt;
         &lt;/div&gt;
        &lt;/li&gt;
&lt;/ol&gt;

All good, and much faster. Happy surfing.</description><category>DNS</category><category>bind</category><category>debian</category><category>hacking</category><category>network</category><guid>http://milosophical.me/blog/2012/01/11/implementing-a-caching-only-dns-on-debian.html</guid><pubDate>Wed, 11 Jan 2012 03:35:59 GMT</pubDate></item></channel></rss>