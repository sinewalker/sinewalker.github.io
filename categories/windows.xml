<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/"><channel><title>Milosophical Me (windows)</title><link>http://milosophical.me/</link><description></description><language>en</language><lastBuildDate>Wed, 28 Jan 2015 08:58:44 GMT</lastBuildDate><generator>http://getnikola.com/</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Java virtual memory limits again</title><link>http://milosophical.me/blog/2012/07/31/java-virtual-memory-limits-again-2.html</link><dc:creator>Mike Lockhart</dc:creator><description>&lt;p&gt;I think I can finally put &lt;a title="32-bit Windows and JVM virtual memory limit" href="http://sinewalker.wordpress.com/2007/03/04/32-bit-windows-and-jvm-virtual-memory-limit"&gt;this old walnut&lt;/a&gt; to bed, having just updated it with some observations made by guru's of Stack Overflow. Hooray, only took me four years :-P&lt;/p&gt;</description><category>hacking</category><category>java</category><category>virtual memory</category><category>windows</category><guid>http://milosophical.me/blog/2012/07/31/java-virtual-memory-limits-again-2.html</guid><pubDate>Tue, 31 Jul 2012 02:50:57 GMT</pubDate></item><item><title>Windows 7 logon background hack</title><link>http://milosophical.me/blog/2012/05/18/windows-7-logon-background-hack.html</link><dc:creator>Mike Lockhart</dc:creator><description>&lt;p&gt;This is common knowledge, yet strangely every time I rebuild my work PC (which is too often! Gah!) I try and Google the location of Registry keys and folders and always, always get a bum-steer. So here, have another (bum-steer?) version of this hack on the Net.


&lt;!--more--&gt;

&lt;/p&gt;&lt;ul&gt;
	&lt;li&gt;Registry key to hack: &lt;strong&gt;HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\ CurrentVersion\Authentication\LogonUI\ Background&lt;/strong&gt;
(you can stick this in a .reg file and Import from regedit.exe):&lt;/li&gt;

&lt;/ul&gt;

&lt;p style="padding-left:60px;"&gt;&lt;code&gt;[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Authentication\LogonUI\Background]

"OEMBackground"=dword:00000001&lt;/code&gt;&lt;/p&gt;



&lt;ul&gt;
	&lt;li&gt;Directory to place your background image:&lt;/li&gt;
&lt;/ul&gt;

&lt;p style="padding-left:60px;"&gt;&lt;code&gt;&lt;strong&gt;C:\Windows\System32\oobe\info\backgrounds&lt;/strong&gt;&lt;/code&gt;&lt;/p&gt;

&lt;p style="padding-left:60px;"&gt;Call the image "&lt;strong&gt;backgroundDefault.jpg&lt;/strong&gt;"&lt;/p&gt;



&lt;ul&gt;
	&lt;li&gt;The image must be JPEG format, and total size &amp;lt; 256KiB&lt;/li&gt;
	&lt;li&gt;You can test straight away with Ctl+Alt+Del -- no need to reboot or logoff.&lt;/li&gt;
&lt;/ul&gt;</description><category>hacking</category><category>registry</category><category>windows</category><guid>http://milosophical.me/blog/2012/05/18/windows-7-logon-background-hack.html</guid><pubDate>Fri, 18 May 2012 11:56:28 GMT</pubDate></item><item><title>Install Emacs24 Snapshot on Debian, Ubuntu and Windows 7</title><link>http://milosophical.me/blog/2012/02/13/install-emacs24-snapshot-on-debian-ubuntu-and-windows-7.html</link><dc:creator>Mike Lockhart</dc:creator><description>&lt;p&gt;I just can't wait for &lt;a title="An overview of what's coming in Emacs 24" href="http://www.masteringemacs.org/articles/2011/12/06/what-is-new-in-emacs-24-part-1/"&gt;Emacs24&lt;/a&gt; to be released! (I know, it's in beta and it'll be officially released Real Soon Now, but my catalyst is Technomancy's ESK2 which is such an improvement over ESK1, and it needs Emacs 24).


In &lt;a title="Build/Install emacs 24 on debian" href="http://sinewalker.wordpress.com/2012/01/15/build-and-install-emacs24-on-debian-squeeze/"&gt;my last post&lt;/a&gt; I had steps to build emacs from source-code. This is worth following for hacker cred, but it soon gets tedious if you have a lot of systems to put emacs on. As pointed out by a few readers, there are some snapshot builds available for different platforms. This post lists steps for installing the pre-built snapshots, for the three operating systems that I use.



&lt;!--more--&gt;



&lt;/p&gt;&lt;h3&gt;Debian&lt;/h3&gt;

As pointed out earlier, you can get &lt;a href="http://emacs.naquadah.org/"&gt;emacs-snapshot builds for Debian&lt;/a&gt; from Julien Danjou (of &lt;a href="http://awesome.naquadah.org"&gt;awesome&lt;/a&gt; fame). That page does have instructions, but I'll list them here anyway:



&lt;ol&gt;
 &lt;li&gt;Import the key (this is a one-line pipeline, broken for display only):
&lt;pre&gt;

$ &lt;strong&gt;wget -q -O - http://emacs.naquadah.org/key.gpg 

| sudo apt-key add -&lt;/strong&gt;



&lt;/pre&gt;
 &lt;/li&gt;
 &lt;li&gt;Add the snapshot repository to your &lt;strong&gt;&lt;code&gt;/etc/apt/sources.list&lt;/code&gt;&lt;/strong&gt; (by hand). Here's Julien's "stable" snapshot:
&lt;pre&gt;

deb http://emacs.naquadah.org/ stable/

deb-src http://emacs.naquadah.org/ stable/



&lt;/pre&gt;
 &lt;/li&gt;
 &lt;li&gt;Update your package database
&lt;pre&gt;

$ &lt;strong&gt;sudo aptitude update&lt;/strong&gt;



&lt;/pre&gt;
 &lt;/li&gt;
 &lt;li&gt;Install emacs-snapshot
&lt;pre&gt;

$ &lt;strong&gt;sudo aptitude install &lt;code&gt;emacs-snapshot&lt;/code&gt;&lt;/strong&gt;



&lt;/pre&gt;
 &lt;/li&gt;
&lt;/ol&gt;



&lt;h3&gt;Ubuntu&lt;/h3&gt;

I'm running Ubuntu 11.10 in a VirtualBox on work's Windows 7 machine. As mentioned at Julien Danjou's page,

Damien Cassou makes a version of the same emacs-snapshot for Ubuntu, which is hosted &lt;a title="emacs-snapshot PPA for ubuntu" href="https://launchpad.net/~cassou/+archive/emacs"&gt;at Launchpad&lt;/a&gt;. You add it and install simalarly:



&lt;ol&gt;
 &lt;li&gt;Add the PPA (Personal Package Archive). This also imports the key:
&lt;pre&gt;

$ &lt;strong&gt;sudo add-apt-repository ppa:cassou/emacs&lt;/strong&gt;



&lt;/pre&gt;
 &lt;/li&gt;
 &lt;li&gt;Update your package database
&lt;pre&gt;

$ &lt;strong&gt;sudo apt-get update&lt;/strong&gt;



&lt;/pre&gt;
 &lt;/li&gt;
 &lt;li&gt;Install emacs-snapshot
&lt;pre&gt;

$ &lt;strong&gt;sudo apt-get install emacs-snapshot&lt;/strong&gt;



&lt;/pre&gt;
 &lt;/li&gt;
&lt;/ol&gt;



&lt;h3&gt;Windows&lt;/h3&gt;

It's handy to have a native Windows emacs as well as the one in the VM. Of course being Windows, it's more complicated to install and configure... This has been tested on Windows 7:



&lt;ol&gt;
 &lt;li&gt;Download the latest PKZIP-ed binary from &lt;a href="http://code.google.com/p/emacs-for-windows/updates/list"&gt;Google Code&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;Unpack the ZIP (Windows Explorer &lt;em&gt;can&lt;/em&gt; open ZIP files -- but &lt;a href="http://www.7-zip.org"&gt;7zip&lt;/a&gt; is mich nicer). I like to unpack emacs in &lt;code&gt;&lt;strong&gt;c:\Applications\emacs&lt;/strong&gt;&lt;/code&gt;&lt;em&gt;&amp;lt;version&amp;gt;&lt;/em&gt; so I can maintain several different versions at once&lt;/li&gt;
 &lt;li&gt;(&lt;em&gt;optional&lt;/em&gt;) Put a windows symlink to the version of emacs you want to use.  This assumes your C: drive is formatted with NTFS, which on most Windows systems it is. The symlink can then be used for your %PATH% later and you won't have to edit the variable again to change versions, which for some odd reason is a convoluted operation in Windows... Type the following in a &lt;strong&gt;CMD.EXE&lt;/strong&gt; prompt:
&lt;pre&gt;

C:\&amp;gt; &lt;strong&gt;CD C:\Applications&lt;/strong&gt;

C:\Applications\&amp;gt; &lt;strong&gt;MKLINK /D emacs emacs&lt;/strong&gt;&lt;em&gt;&amp;lt;version&amp;gt;&lt;/em&gt;



&lt;/pre&gt;
 &lt;/li&gt;
 &lt;li&gt;Create an &lt;em&gt;Environment Variable&lt;/em&gt; called &lt;code&gt;&lt;strong&gt;%HOME%&lt;/strong&gt;&lt;/code&gt; that refers to your Windows home directory (&lt;code&gt;C:\Users\&lt;/code&gt;&lt;em&gt;&amp;lt;username&amp;gt;&lt;/em&gt;). This is so that you can put your &lt;code&gt;.emacs.d&lt;/code&gt; in your home directory, and Emacs will find it:
 &lt;ol type="a"&gt;
  &lt;li&gt;Open &lt;strong&gt;Windows Explorer&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;Right-click on "&lt;strong&gt;My Computer&lt;/strong&gt;", choose "&lt;strong&gt;Properties&lt;/strong&gt;"&lt;/li&gt;
  &lt;li&gt;Choose "&lt;strong&gt;Advance system settings&lt;/strong&gt;" (Really? what's so advanced about an environment variable?)&lt;/li&gt;
  &lt;li&gt;Make sure the "&lt;strong&gt;Advanced&lt;/strong&gt;" tab of the &lt;strong&gt;System Properties&lt;/strong&gt; dialog is selected, then press the "&lt;strong&gt;Environment Variables...&lt;/strong&gt;" button&lt;/li&gt;
  &lt;li&gt;Press the top "&lt;strong&gt;New...&lt;/strong&gt;" button (to add a personal variable, rather than system variable)&lt;/li&gt;
  &lt;li&gt;in the "&lt;strong&gt;Variable name:&lt;/strong&gt;" field, enter &lt;code&gt;&lt;strong&gt;HOME&lt;/strong&gt;&lt;/code&gt;. In the "&lt;strong&gt;Variable value:&lt;/strong&gt;" field, put &lt;code&gt;&lt;strong&gt;%USERPROFILE%&lt;/strong&gt;&lt;/code&gt;, press "&lt;strong&gt;OK&lt;/strong&gt;" button&lt;/li&gt;
  &lt;li&gt;Press the other "&lt;strong&gt;OK&lt;/strong&gt;" button to dismiss the Environment Varables dialog&lt;/li&gt;
  &lt;li&gt;Press yet another "&lt;strong&gt;OK&lt;/strong&gt;" button to dismiss the System Properties dialog&lt;/li&gt;
 &lt;/ol&gt;
 &lt;/li&gt;
 &lt;li&gt;Put emacs in your &lt;code&gt;&lt;strong&gt;%PATH%&lt;/strong&gt;&lt;/code&gt;. Use the same steps above to edit the Sytem variable PATH and add the path to Emacs (&lt;code&gt;&lt;strong&gt;;C:\Applications\emacs\bin&lt;/strong&gt;&lt;/code&gt; if you put a symlink in step 3)&lt;/li&gt;
&lt;/ol&gt;



&lt;h3&gt;Personal Emacs settings&lt;/h3&gt;

You can now put your emacs settings into &lt;code&gt;~/.emacs.d&lt;/code&gt; (that's &lt;code&gt;%HOME%\.emacs.d&lt;/code&gt; for Windows). I highly recommend &lt;a title="Technomany's home" href="http://technomancy.us/"&gt;Technomancy&lt;/a&gt;'s &lt;a title="GitHub ESK2 branch" href="https://github.com/technomancy/emacs-starter-kit"&gt;Emacs Starter Kit&lt;/a&gt; (version 2).



My own&lt;code&gt; ~/.emacs.d/init.el&lt;/code&gt; is set up to bootstrap ESK2 and a few favourite packages, just as Technomancy describes. 



One package I'd like to mention here is "&lt;a href="http://xahlee.org/emacs/ergonomic_emacs_keybinding.html"&gt;ergoemacs-keybindings&lt;/a&gt;" which gives more modern/ergonomic key bindings to emacs. Together with cua-mode, it makes Emacs behave very nicely. Currently though I notice there's a problem loading the package (maybe it's autoloads aren't right yet?) So I have to hack it as described in the package's README, (with a hard-coded path to the package directory, that'll break if I update it in the future because it has the package version) but I hope to fix it and send a patch for Xah Real Soon Now...  In the mean-time, here's a snippet:




~~~~~~~~~~~~{.clojure}


;;;; egroemacs keybindings

(setenv "ERGOEMACS_KEYBOARD_LAYOUT" "dv") ; US Dvorak (Ergonomic)



;; FIX: for some reason the library isn't loading from the package? 

;;      Have to put full path to the load file, which is brittle

(when (package-installed-p 'ergoemacs-keybindings)
  (load-file "~/.emacs.d/elpa/ergoemacs-keybindings-5.3.9/ergoemacs-keybindings.el")
  (ergoemacs-mode 1)
  (cua-mode 1))

~~~~~~~~~~~~




(btw, the lisp-ish CSH above is done by using WordPress' sourcecode block and specifying "clojure" for the language)</description><category>debian</category><category>emacs</category><category>emacs24</category><category>hacking</category><category>tips</category><category>ubuntu</category><category>windows</category><guid>http://milosophical.me/blog/2012/02/13/install-emacs24-snapshot-on-debian-ubuntu-and-windows-7.html</guid><pubDate>Mon, 13 Feb 2012 00:15:29 GMT</pubDate></item><item><title>Curious cursor complication with Emacs and Windows Magnifier</title><link>http://milosophical.me/blog/2011/11/30/curious-cursor-complication-with-emacs-and-windows-magnifier.html</link><dc:creator>Mike Lockhart</dc:creator><description>&lt;p&gt;I recently noticed a bug when you start GNU Emacs win32 &lt;em&gt;after&lt;/em&gt; starting &lt;a title="Microsoft: Make items on the screen appear bigger (Magnifier)" href="http://windows.microsoft.com/en-AU/windows7/Make-items-on-the-screen-appear-bigger-Magnifier"&gt;Windows Magnifier&lt;/a&gt;: Emacs' cursor becomes a single-pixel "caret" instead of the box cursor. This makes the cursor very hard to find.
&lt;!--more--&gt;

I usually leave Emacs' cursor at the default (&lt;code&gt;box&lt;/code&gt;) because this is so much easier to see, especially if you also enable &lt;code&gt;blink-cursor-mode&lt;/code&gt; (though&lt;a title="How to stop blinking cursors" href="http://www.jurta.org/en/prog/noblink"&gt; that's a matter of taste&lt;/a&gt;, I suppose). The default settings also set the cursor to a &lt;code&gt;hollow&lt;/code&gt; box when the &lt;code&gt;window&lt;/code&gt; (or the entire &lt;a title="Emacs frames and windows" href="http://emacsworld.blogspot.com/2008/08/emacs-frames-and-windows.html"&gt;&lt;code&gt;frame&lt;/code&gt;&lt;/a&gt;) is inactive.



Really, a text editor is unusable with a "caret" or bar-shaped cursor.



The following behaviors are observed with this bug:

&lt;/p&gt;&lt;ul&gt;
	&lt;li&gt;This affects at least GNU Emacs versions 23.1 &lt;a title="Download GNU Emacs for Windows, from GNU FTP site" href="http://ftp.gnu.org/pub/gnu/emacs/windows/"&gt;for Windows&lt;/a&gt;, and &lt;a title="GNU Emacs 24 win32 pre-built binaries at Google Code" href="http://code.google.com/p/emacs-for-windows/downloads/list"&gt;24.0 compiled&lt;/a&gt; with mingw for win32&lt;/li&gt;
	&lt;li&gt;The actual shape of the cursor has no correspondence with the value of the &lt;code&gt;cursor-type&lt;/code&gt; variable: it is always as-if the value were &lt;code&gt;(bar . 1)&lt;/code&gt; (a vertical bar, one pixel wide)&lt;/li&gt;
	&lt;li&gt;The cursor blinks, whether you have enabled &lt;code&gt;blink-cursor-mode&lt;/code&gt; or not&lt;/li&gt;
	&lt;li&gt;The value of the Windows Registry key &lt;strong&gt;&lt;code&gt;HKCU\Control Panel\Desktop\CaretWidth&lt;/code&gt;&lt;/strong&gt; also has no bearing on the cursor shape (though this key is great for setting the cursor thickness in other Windows programs...)&lt;/li&gt;
	&lt;li&gt;(This one took me ages to find) &lt;span style="text-decoration:underline;"&gt;It only happens if Windows Magnifier is running&lt;/span&gt; &lt;em&gt;before&lt;/em&gt; you start Emacs. If you start Emacs first, and &lt;em&gt;then&lt;/em&gt; start Magnifier, the cursor is unchanged and respects the value of &lt;code&gt;cursor-type&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

So, the work-around for this is to start Emacs before you run Magnifier (especially: make sure the Windows Accessibility feature that starts Magnifier when you log in, is turned OFF).



&lt;a title="Search GNU Bugtracker for emacs cursor bugs" href="http://debbugs.gnu.org/cgi/pkgreport.cgi?include=subject%3Acursor;package=emacs"&gt;As far as I can tell&lt;/a&gt;, there is no bug report for this.  I may file one when I get around to figuring out &lt;a title="GNU Bugtracker home" href="http://debbugs.gnu.org/"&gt;GNU's bug-tracker&lt;/a&gt;.</description><category>bug</category><category>cursor</category><category>emacs</category><category>hacking</category><category>magnifier</category><category>registry</category><category>windows</category><guid>http://milosophical.me/blog/2011/11/30/curious-cursor-complication-with-emacs-and-windows-magnifier.html</guid><pubDate>Wed, 30 Nov 2011 03:17:06 GMT</pubDate></item><item><title>MS-Windows focus-follows-mouse Registry hacks</title><link>http://milosophical.me/blog/2010/03/10/ms-windows-focus-follows-mouse-registry-hacks.html</link><dc:creator>Mike Lockhart</dc:creator><description>&lt;p&gt;I like the "focus follows mouse" window-focussing model from X11, because
&lt;/p&gt;&lt;ul&gt;
	&lt;li&gt;I don't have to click on the window, just move the mouse and the window it's over is focussed&lt;/li&gt;
	&lt;li&gt;I can focus a window &lt;em&gt;without&lt;/em&gt; bringing it to the front, which is sometimes handy. If I want it in front, I can click it.&lt;/li&gt;
&lt;/ul&gt;

However MS-Windows follows the old-fashioned, Macintosh/Smalltalk style of having users click on a window to focus it for the keyboard. How do you make MS-Windows behave more like X11?



&lt;!--more--&gt;I used to install &lt;strong&gt;TweakUI &lt;/strong&gt;from Microsoft, just so that I could turn on an X11-like focus-follows-mouse mode, but Microsoft don't make TweakUI for Vista (there is &lt;strong&gt;TweakVI &lt;/strong&gt;instead, if you want to Google for it. It's by some other company. It's not bad, but overkill for what I want to do).



In Vista, Microsoft added a GUI for this mode that's &lt;em&gt;almost&lt;/em&gt; what I want. You can do this:



Open Control Panel (new view, not Classic)

&lt;p style="padding-left:30px;"&gt;&amp;gt; Ease of Access Center&lt;/p&gt;

&lt;p style="padding-left:60px;"&gt;&amp;gt; Make the mouse easier to use&lt;/p&gt;

&lt;p style="padding-left:90px;"&gt;&amp;gt; [ ] Activate a window by hovering over it with the mouse&lt;/p&gt;

But this also brings the window to the front when it's focussed.  If that's what you want, then you're done. If you're like me and you want the window under the mouse to have keyboard focus, but you &lt;em&gt;don't&lt;/em&gt; want it brought to the front without clicking on it, you'll need to hack the Windows Registry. Here are some steps, which should be good for any release of Windows that is based on Windows NT (NT, 2000, XP, Vista, Win7):

&lt;ol&gt;
	&lt;li&gt;Run &lt;strong&gt;regedit &lt;/strong&gt;(Win+R, regedit, OK)&lt;/li&gt;
	&lt;li&gt;Open up the key &lt;strong&gt;HKEY_CURRENT_USER\Control Panel\Mouse&lt;/strong&gt;&lt;/li&gt;
	&lt;li&gt;Change the value of the REG_DWORD &lt;strong&gt;ActiveWindowTracking&lt;/strong&gt; to 0x0000001 (1)&lt;/li&gt;
	&lt;li&gt;Open up the key &lt;strong&gt;HKEY_CURRENT_USER\Control Panel\Desktop&lt;/strong&gt;&lt;/li&gt;
	&lt;li&gt;&lt;strong&gt;Logical OR&lt;/strong&gt; the first byte of the REG_BINARY &lt;strong&gt;UserPreferencesMask&lt;/strong&gt; with &lt;strong&gt;0&lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;&lt;strong&gt;1&lt;/strong&gt;.  That is, if the current value is df 3e 03 80 12 00 00 00, then leave the 'df' alone. If it's 9&lt;strong&gt;&lt;em&gt;e&lt;/em&gt;&lt;/strong&gt; 03 07 80 12 00 00 00 , change it to 9&lt;strong&gt;&lt;em&gt;f&lt;/em&gt; &lt;/strong&gt;.. ..  and so on &lt;strong style="color:#7744ee;"&gt;*&lt;/strong&gt;&lt;/li&gt;
	&lt;li&gt;To make the focus a little slower, so that pop-up windows are useable, you also want to change the focus timing. Change the REG_DWORD &lt;strong&gt;ActiveWindTrkTimeout&lt;/strong&gt; (also in HKEY_CURRENT_USER\Control Panel\Desktop) to the number of milliseconds to wait before focus shifts to the window under the mouse.  I like a value of 0x00000080 (128ms). You might like 200ms (c8), or some faster or slower value.&lt;/li&gt;
&lt;/ol&gt;

&lt;strong style="color:#7744ee;"&gt;*&lt;/strong&gt; If you can't do this hexadecimal bit twiddling math in your head (difficult if you're not a programmer), then Windows' Calc can do it for you: put it in Programmer and Hex modes, type the first byte (hex pair e.g. 9e), press the 'Or' button, then '1' and the '=' button.  If the number changes, that's what you replace the first byte with. Thanks to Erik in the comments below, I've finally figured this out and (I hope) clarified what to do..



So, in summary, the Registry keys are as follows for X11-like window focus:

&lt;pre&gt;HKEY_CURRENT_USERS\Control Panel\Mouse

  REG_DWORD ActiveWindowTracking = 0x00000001  (1)

HKEY_CURRENT_USERS\Control Panel\Desktop

  REG_DWORD ActiveWindTrkTimeout = 0x00000080  (128)

  REG_BINARY UserPreferencesMask OR= 01 .. .. .. .. .. .. .. ..&lt;/pre&gt;

These registry hacks require a reboot to take effect.</description><category>desktop</category><category>geek</category><category>hacking</category><category>how-to</category><category>tip</category><category>useability</category><category>windows</category><category>x11</category><guid>http://milosophical.me/blog/2010/03/10/ms-windows-focus-follows-mouse-registry-hacks.html</guid><pubDate>Wed, 10 Mar 2010 03:42:26 GMT</pubDate></item></channel></rss>