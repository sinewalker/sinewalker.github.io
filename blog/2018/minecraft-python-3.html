<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Exploring Minecraft, MCPIPY, Jupyter, and RaspberryJam">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Exploring Minecraft code in Jupyter | Milosophical Me</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#e37f2a;">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="http://milosophical.me/blog/2018/minecraft-python-3.html">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Michael Lockhart">
<link rel="prev" href="minecraft-python-2.html" title="A Minecraft Coding environment" type="text/html">
<link rel="next" href="4-bits-part3.html" title="4-bit Rules of Computing, Part 3" type="text/html">
<meta property="og:site_name" content="Milosophical Me">
<meta property="og:title" content="Exploring Minecraft code in Jupyter">
<meta property="og:url" content="http://milosophical.me/blog/2018/minecraft-python-3.html">
<meta property="og:description" content="Exploring Minecraft, MCPIPY, Jupyter, and RaspberryJam">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2018-02-10T21:50:09+11:00">
<meta property="article:tag" content="getkidscoding">
<meta property="article:tag" content="Jupyter">
<meta property="article:tag" content="literate">
<meta property="article:tag" content="minecraft">
<meta property="article:tag" content="python">
<meta property="article:tag" content="RaspberryJam">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://milosophical.me/">

                <span id="blog-title">Milosophical Me</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" role="navigation" aria-expanded="false">
            <ul class="nav navbar-nav">
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Navigate <b class="caret"></b></a>
            <ul class="dropdown-menu">
<li>
<a href="../index.html">Blog</a>
                    </li>
<li>
<a href="../../archive/archive.html">Archive</a>
                    </li>
<li>
<a href="../../tags/index.html">Tags</a>
                    </li>
<li>
<a href="../../pg/index.html">Codex</a>
                    </li>
<li>
<a href="../../pixels/index.html">Pixels</a>
            </li>
</ul>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Social <b class="caret"></b></a>
            <ul class="dropdown-menu">
<li>
<a href="https://gist.github.com/sinewalker">Gists - Microblog</a>
                    </li>
<li>
<a href="https://www.twitter.com/milo_hax">Tweets - Nanoblog</a>
                    </li>
<li>
<a href="https://www.facebook.com/sinewalker">Facebook - Necessary Evil</a>
                    </li>
<li>
<a href="mailto:sinewalker@gmail.com">Email - So 20th Century</a>
            </li>
</ul>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Code <b class="caret"></b></a>
            <ul class="dropdown-menu">
<li>
<a href="https://github.com/sinewalker">GitHub</a>
                    </li>
<li>
<a href="https://gist.github.com/sinewalker">Gists</a>
                    </li>
<li>
<a href="https://bitbucket.com/sinewalker">Bitbucket</a>
                    </li>
<li>
<a href="https://codepen.io/sinewalker/">Codepen</a>
                    </li>
<li class="active">
<a href="#"> <span class="sr-only">(active)</span></a>
                    </li>
<li>
<a href="https://gitlab.com/sinewalker">GitLab</a>
                    </li>
<li>
<a href="https://sourceforge.net/u/sinewalker/profile/">SourceForge</a>
            </li>
</ul>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Jargon <b class="caret"></b></a>
            <ul class="dropdown-menu">
<li>
<a href="../../jargon/index.html">Main page</a>
                    </li>
<li>
<a href="../../jargon/html/index.html">Table of Content</a>
                    </li>
<li>
<a href="../../jargon/html/lexicon.html">Lexicon</a>
                    </li>
<li>
<a href="../../jargon/html/go01.html">Glossary</a>
                    </li>
<li>
<a href="../../jargon/html/appendixa.html">Folklore</a>
            </li>
</ul>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About <b class="caret"></b></a>
            <ul class="dropdown-menu">
<li>
<a href="https://about.me/mikelockhart">About.me</a>
                    </li>
<li>
<a href="https://milohax.net">Milohax.net</a>
                    </li>
<li>
<a href="https://www.linkedin.com/in/mikelockhart">LinkedIn</a>
                    </li>
<li>
<a href="http://stackoverflow.com/users/776953/mike">Stack Overflow</a>
                    </li>
<li class="active">
<a href="#"> <span class="sr-only">(active)</span></a>
                    </li>
<li>
<a href="../../pg/colophon.html">About this site</a>
                    </li>
<li>
<a href="../../rss.xml">Rich Site Summary (RSS)</a>
                    </li>
<li>
<a href="https://github.com/sinewalker/sinewalker.github.io/wiki">Meta-Wiki</a>
                    </li>
<li>
<a href="https://github.com/sinewalker/sinewalker.github.io/issues">Issues log</a>
            </li>
</ul>
</li>
</ul>
<!-- DuckDuckGo custom search --><form method="get" id="search" action="https://duckduckgo.com/" class="navbar-form navbar-right" role="search">
<input type="hidden" name="sites" value="http://milosophical.me/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search…" class="form-control"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
<!-- End of custom search -->


            <ul class="nav navbar-nav navbar-right">
<li>
    <a href="minecraft-python-3.ipynb" id="sourcelink">Source</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Exploring Minecraft code in Jupyter</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                    <a href="../../authors/michael-lockhart.html">Michael Lockhart</a>
            </span></p>
            <p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2018-02-10T21:50:09+11:00" itemprop="datePublished" title="2018-02-10 21:50">2018-02-10 21:50</time></a></p>
            
        <p class="sourceline"><a href="minecraft-python-3.ipynb" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Some breif notes from a lazy Sunday morning spent exploring the <a href="minecraft-python-2.html">minecraft coding environment</a> that I set up using <a href="http://www.instructables.com/id/Python-coding-for-Minecraft/">Raspberry Jam</a> earlier.  I'm taking my notes in <a href="http://jupyter-notebook-beginner-guide.readthedocs.io/en/latest/what_is_jupyter.html">Jupyter</a> while I explore the Minecraft API and poke around with one of the sample programs.  Since my blogging engine <a href="https://getnikola.com/">Nikola</a> also supports Jupyter Notebooks as one of it's import formats, I found that I could do <a href="http://www.literateprogramming.com/">Litterate Programming</a> for Minecraft quite nicely!
<!-- TEASER_END --></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>
<h2 id="More-about-the-API">More about the API<a class="anchor-link" href="minecraft-python-3.html#More-about-the-API">¶</a>
</h2>
<p>The <em>Stuff About Code</em> web site has some really useful detail for the methods included in the API:</p>
<ul>
<li>
<a href="http://www.stuffaboutcode.com/2013/04/minecraft-pi-edition-api-tutorial.html">MCPI API tutorial</a> and <a href="http://www.stuffaboutcode.com/2013/01/raspberry-pi-minecraft-api-basics.html">basics</a>
</li>
<li><a href="http://www.stuffaboutcode.com/p/minecraft-api-reference.html">MCPI API reference</a></li>
<li>
<a href="http://minecraft-stuff.readthedocs.io/en/latest/minecraftdrawing.html">Minecraft Stuff documentation</a> (higher-level primatives and turtle-graphics)</li>
<li>And heaps of example projects including in-world Snake and a Cannon that fires blocks to blow things up, which show in detail how to use the API</li>
</ul>
<h2 id="Exploring-in-a-Notebook">Exploring in a Notebook<a class="anchor-link" href="minecraft-python-3.html#Exploring-in-a-Notebook">¶</a>
</h2>
<p>The <a href="https://ngcm.github.io/PythonTool-Mod/startcoding/">PythonTool Mod documentation</a> shows using Jupyter Notebooks to explore Minecraft interactively.  Let's try that, since Nikola also uses Notebooks.</p>
<h3 id="Nikola/Python-setup">Nikola/Python setup<a class="anchor-link" href="minecraft-python-3.html#Nikola/Python-setup">¶</a>
</h3>
<p>I'm using a Python Virtual Environment to run my Nikola blog engine locally. So I'll make changes in there, but it's also possible to do this in a separate "minecraft" venv.</p>
<p>First, add the necessary Python libraries if not already installed:</p>

<pre><code>activate nikola
pip install jupyter-notebook minecraftstuff</code></pre>
<p>When that's ready, I made a new post in Nikola, but you can skip that and just create a new Notebook after starting Jupyter.</p>

<pre><code>[src][mjl@milo:~/hax/net/blog/milosophical.me]
[17:11](nikola)$ nikola new_post -d -2 -f ipynb
Creating New Post
-----------------

Title: minecraft-python-3
Scanning posts..........done!
[2018-02-10T10:50:09Z] NOTICE: compile_ipynb: No kernel specified, assuming "python3".
[2018-02-10T10:50:09Z] INFO: new_post: Your post's metadata is at: posts/2018/minecraft-python-3.meta
[2018-02-10T10:50:09Z] INFO: new_post: Your post's text is at: posts/2018/minecraft-python-3.ipynb
[src:?][mjl@milo:~/hax/net/blog/milosophical.me]
[21:50](nikola)$</code></pre>
<p>I also need to link to the MCPIPY library files, so that I can <code>import</code> them in Jupyter:</p>

<pre><code>cd posts/2018
ln -s ~/fun/minecaft/mcpipy/mcpi mcpi
git ignore mcpi   #I don't want this in my blog code</code></pre>
<p>Now start the notebook:</p>

<pre><code>[src:!?][mjl@milo:~/Grid/MEGA/Projects/blog/milosophical.me/posts/2018]
[08:10](nikola)$ jupyter notebook
[I 08:10:32.921 NotebookApp] Serving notebooks from local directory: /Users/mjl/Grid/MEGA/Projects/blog/milosophical.me/posts/2018
[I 08:10:32.921 NotebookApp] 0 active kernels
[I 08:10:32.921 NotebookApp] The Jupyter Notebook is running at: http://localhost:8888/?token=08f71c4de52c71b408c44442bea7774169095a902db68336
[I 08:10:32.921 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).
[C 08:10:32.923 NotebookApp]

    Copy/paste this URL into your browser when you connect for the first time,
    to login with a token:
        http://localhost:8888/?token=08f71c4de52c71b408c44442bea7774169095a902db68336
[I 08:10:32.999 NotebookApp] Accepting one-time-token-authenticated connection from ::1</code></pre>
<p>This will launch your computer's default web browser and automatically log it into the Jupyter system with the token.  You can then navigate to the post or create a new Notebook by using the New button.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Hacking-an-example">Hacking an example<a class="anchor-link" href="minecraft-python-3.html#Hacking-an-example">¶</a>
</h2>
<p>Let's play with the <strong>zhuowei_rainbow.py</strong> example code (you can see the <a href="https://github.com/arpruss/raspberryjammod/blob/master/mcpipy/zhuowei_rainbow.py">original code on github</a> (arpruss' copy, with changes for Python3). You should probably open that link in a new window so you can compare with this post. Here it is in case the link ever goes stale:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="c1">#</span>
<span class="c1"># mcpipy.com retrieved from URL below, written by zhuowei</span>
<span class="c1"># http://www.minecraftforum.net/topic/1638036-my-first-script-for-minecraft-pi-api-a-rainbow/</span>

<span class="kn">import</span> <span class="nn">mcpi.minecraft</span> <span class="kn">as</span> <span class="nn">minecraft</span>
<span class="kn">import</span> <span class="nn">mcpi.block</span> <span class="kn">as</span> <span class="nn">block</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">server</span>

<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="mi">14</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>

<span class="n">mc</span> <span class="o">=</span> <span class="n">minecraft</span><span class="o">.</span><span class="n">Minecraft</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">server</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
<span class="n">height</span> <span class="o">=</span> <span class="mi">60</span>

<span class="n">mc</span><span class="o">.</span><span class="n">setBlocks</span><span class="p">(</span><span class="o">-</span><span class="mi">64</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">64</span><span class="p">,</span><span class="n">height</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">128</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">colourindex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)):</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">sin</span><span class="p">((</span><span class="n">x</span> <span class="o">/</span> <span class="mf">128.0</span><span class="p">)</span> <span class="o">*</span> <span class="n">pi</span><span class="p">)</span> <span class="o">*</span> <span class="n">height</span> <span class="o">+</span> <span class="n">colourindex</span>
                <span class="n">mc</span><span class="o">.</span><span class="n">setBlock</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">64</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">block</span><span class="o">.</span><span class="n">WOOL</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">colors</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">colourindex</span><span class="p">])</span>
</pre></div>
<p>This is a nice simple program that has a few things I'd like to change.</p>
<ul>
<li>I'd like to use STAINED_GLASS blocks instead of WOOL, so that the rainbow is transparent</li>
<li>It has a bug where it clears all the blocks under it to AIR which breaks anything that you have underneath the rainbow:</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="../../pixels/minecraft/broken-donut.png" alt=""></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>It'd be nice to be able to place a rainbow near where the player is, instead of allways at 0,0,0</li>
<li>The rainbow is sweeping over the <em>X</em> axis (West-East), but I'd rather it went over the <em>Z</em> access (South-North) so that it's in the right orrientation: 90 degrees offset relative to the Sun</li>
</ul>
<h3 id="Start-up-Minecraft-with-the-Forge-mods-and-play-a-Single-player-game">Start up Minecraft with the Forge mods and play a Single-player game<a class="anchor-link" href="minecraft-python-3.html#Start-up-Minecraft-with-the-Forge-mods-and-play-a-Single-player-game">¶</a>
</h3>
<p>Okay, now I can edit inline of this post, I'll just copy-paste the code from the file into here.  Let's hack!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Import-the-Minecraft-library-objects">Import the Minecraft library objects<a class="anchor-link" href="minecraft-python-3.html#Import-the-Minecraft-library-objects">¶</a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">mcpi.minecraft</span> <span class="k">as</span> <span class="nn">minecraft</span>
<span class="kn">import</span> <span class="nn">mcpi.block</span> <span class="k">as</span> <span class="nn">block</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">server</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">ModuleNotFoundError</span>                       Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-dbfb1a3ebb83&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span class="ansi-green-fg">import</span> mcpi<span class="ansi-blue-fg">.</span>block <span class="ansi-green-fg">as</span> block
<span class="ansi-green-intense-fg ansi-bold">      3</span> <span class="ansi-green-fg">from</span> math <span class="ansi-green-fg">import</span> <span class="ansi-blue-fg">*</span>
<span class="ansi-green-fg">----&gt; 4</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">import</span> server

<span class="ansi-red-fg">ModuleNotFoundError</span>: No module named 'server'</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Oh, whoops!</p>
<p>Well, okay, Jupyter can't find the <code>server</code> library... hmm. It's not part of mcpi, that's why.  What does that code actually do?  I'll take a look (just the code please, no comments):</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">cd</span> ~/fun/minecraft/mcpipy/
<span class="o">!!</span>egrep -v <span class="s1">'^#'</span> server.py
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>/Users/mjl/Grid/MEGA/fun/minecraft/mcpipy
</pre>
</div>
</div>

<div class="output_area">

<div class="prompt output_prompt">Out[2]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>['', 'address = "127.0.0.1"', '', '', 'is_pi = False']</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>That is code to specify which minecraft server to connect to. A lot of the mcpipy examples include it.  It's designed so that you keep a server.py together with your scripts and edit it to change where to connect to.  I'm going to just skip it for running within Jupyter. I'll ignore that error, and replace any mention of <code>server.address</code> or <code>server.is_pi</code> with appropriate values.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Connect-to-the-game">Connect to the game<a class="anchor-link" href="minecraft-python-3.html#Connect-to-the-game">¶</a>
</h3>
<p>(This also sets some values used later)</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="mi">14</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>

<span class="n">mc</span> <span class="o">=</span> <span class="n">minecraft</span><span class="o">.</span><span class="n">Minecraft</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
<span class="n">height</span> <span class="o">=</span> <span class="mi">60</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Start-experimenting">Start experimenting<a class="anchor-link" href="minecraft-python-3.html#Start-experimenting">¶</a>
</h3>
<p>The rest of the zhouwhei_rainbow code looks like this:</p>
<div class="highlight"><pre><span></span><span class="n">mc</span><span class="o">.</span><span class="n">setBlocks</span><span class="p">(</span><span class="o">-</span><span class="mi">64</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">64</span><span class="p">,</span><span class="n">height</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">128</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">colourindex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)):</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">sin</span><span class="p">((</span><span class="n">x</span> <span class="o">/</span> <span class="mf">128.0</span><span class="p">)</span> <span class="o">*</span> <span class="n">pi</span><span class="p">)</span> <span class="o">*</span> <span class="n">height</span> <span class="o">+</span> <span class="n">colourindex</span>
                <span class="n">mc</span><span class="o">.</span><span class="n">setBlock</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">64</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">block</span><span class="o">.</span><span class="n">WOOL</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">colors</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">colourindex</span><span class="p">])</span>
</pre></div>
<p>The first line:</p>
<div class="highlight"><pre><span></span><span class="n">mc</span><span class="o">.</span><span class="n">setBlocks</span><span class="p">(</span><span class="o">-</span><span class="mi">64</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">64</span><span class="p">,</span><span class="n">height</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
<p>is what's clearing all the blocks to AIR (block id 0).  It's not necessary, so I won't do that, but I will run the rest</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">128</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">colourindex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)):</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">sin</span><span class="p">((</span><span class="n">x</span> <span class="o">/</span> <span class="mf">128.0</span><span class="p">)</span> <span class="o">*</span> <span class="n">pi</span><span class="p">)</span> <span class="o">*</span> <span class="n">height</span> <span class="o">+</span> <span class="n">colourindex</span>
                <span class="n">mc</span><span class="o">.</span><span class="n">setBlock</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">64</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">block</span><span class="o">.</span><span class="n">WOOL</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">colors</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">colourindex</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="../../pixels/minecraft/zhouwei_rainbow.png" alt=""></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I nice wooly rainbow.  The code loops over the <em>X</em> axis and calculates nice curves for each colour in the rainbow, using the <code>sin</code> function.  Each block in the curve is set to WOOL with a <em>data</em> value for the colour, taken from the <code>colors</code> array.</p>
<p>The first thing to do is change it to STAINED_GLASS instead.  I'll just repeat this loop and replace the existing blocks:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">128</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">colourindex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)):</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">sin</span><span class="p">((</span><span class="n">x</span> <span class="o">/</span> <span class="mf">128.0</span><span class="p">)</span> <span class="o">*</span> <span class="n">pi</span><span class="p">)</span> <span class="o">*</span> <span class="n">height</span> <span class="o">+</span> <span class="n">colourindex</span>
                <span class="n">mc</span><span class="o">.</span><span class="n">setBlock</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">64</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">block</span><span class="o">.</span><span class="n">STAINED_GLASS</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">colors</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">colourindex</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="../../pixels/minecraft/rainbow-glass.png" alt=""></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>That's better.  You can see the little village showing through the rainbow now.</p>
<p>Let's change the <code>setBlock</code> call so that it sweeps over the <em>Z</em> axis insted of <em>X</em>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">128</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">colourindex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)):</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">sin</span><span class="p">((</span><span class="n">z</span> <span class="o">/</span> <span class="mf">128.0</span><span class="p">)</span> <span class="o">*</span> <span class="n">pi</span><span class="p">)</span> <span class="o">*</span> <span class="n">height</span> <span class="o">+</span> <span class="n">colourindex</span>
                <span class="n">mc</span><span class="o">.</span><span class="n">setBlock</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">z</span> <span class="o">-</span> <span class="mi">64</span><span class="p">,</span> <span class="n">block</span><span class="o">.</span><span class="n">STAINED_GLASS</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">colors</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">colourindex</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="../../pixels/minecraft/rainbow-cross.png" alt=""></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>That was simple — just swap the position of the arguments to <code>setBlock</code>.  I also renamed the loop variable to <em>z</em> so that it's clear what it's doing.</p>
<p>It would be nice to have a rainbow over one of those villages.  To do that, the code needs to use a different starting point to the hard-coded 0,0-64,0 in code above. Actually the code uses a lot of <a href="../../jargon/html/M/magic-number.html">magic numbers</a> (like 128 and 64).  Let's fix that by defining some values:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">height</span> <span class="o">=</span> <span class="mi">60</span>
<span class="n">width</span> <span class="o">=</span> <span class="mf">128.0</span>
<span class="n">pos</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">getPos</span><span class="p">()</span>
<span class="n">pX</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
<span class="n">pZ</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>

<span class="n">pos</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[7]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>Vec3(-1436.9899566384854,74.0,-278.2069795419402)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Okay, that shows a nice way to debug Minecraft hacks from within a Notebook too: you can just get Jupyter to run a cell and the last value (the <code>pos</code> at the end) will be output like above, in the Notebook.</p>
<p>Using these <em>variables</em> in place of the numbers should be enough to solve our other issues. I'll reformat the code a bit so that it fits within the page width nicer too:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">width</span><span class="p">)):</span>
    <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)):</span>
        <span class="n">mc</span><span class="o">.</span><span class="n">setBlock</span><span class="p">(</span><span class="n">pX</span><span class="p">,</span>
                    <span class="nb">int</span><span class="p">(</span><span class="n">sin</span><span class="p">((</span><span class="n">z</span> <span class="o">/</span> <span class="n">width</span><span class="p">)</span> <span class="o">*</span> <span class="n">pi</span><span class="p">)</span> <span class="o">*</span> <span class="n">height</span> <span class="o">+</span> <span class="n">idx</span><span class="p">),</span>
                    <span class="n">pZ</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">z</span><span class="p">,</span>
                    <span class="n">block</span><span class="o">.</span><span class="n">STAINED_GLASS</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                    <span class="n">colors</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">idx</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="../../pixels/minecraft/rainbow-village.png" alt=""></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Sweet!  That was fun,  next to try doing this with an actual kid....  ;-)</p>

</div>
</div>
</div>
    </div>
  </div>

    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../tags/getkidscoding.html" rel="tag">getkidscoding</a></li>
            <li><a class="tag p-category" href="../../tags/jupyter.html" rel="tag">Jupyter</a></li>
            <li><a class="tag p-category" href="../../tags/literate.html" rel="tag">literate</a></li>
            <li><a class="tag p-category" href="../../tags/minecraft.html" rel="tag">minecraft</a></li>
            <li><a class="tag p-category" href="../../tags/python.html" rel="tag">python</a></li>
            <li><a class="tag p-category" href="../../tags/raspberryjam.html" rel="tag">RaspberryJam</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="minecraft-python-2.html" rel="prev" title="A Minecraft Coding environment">Previous post</a>
            </li>
            <li class="next">
                <a href="4-bits-part3.html" rel="next" title="4-bit Rules of Computing, Part 3">Next post</a>
            </li>
        </ul></nav></aside><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha256-SDRP1VVYu+tgAGKhddBSl5+ezofHKZeI+OzxakbIe/Y=" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$latex ','$'], ['\\(','\\)']]}});
        </script></article>
</div>
        <!--End of body content-->

        <footer id="footer"><hr>Contents Copyright © 
<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
<img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png"></a>
 2005 — 2020         <a href="mailto:sinewalker@gmail.com">Michael Lockhart</a>. Powered by <a href="https://getnikola.com" rel="nofollow"><img src="../../img/nikola.png" alt="Nikola"></a>, <a href="https://github.com/syl20bnr/spacemacs"><img src="https://cdn.rawgit.com/syl20bnr/spacemacs/442d025779da2f62fc86c2082703697714db6514/assets/spacemacs-badge.svg" alt="built with Spacemacs"></a>

            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
