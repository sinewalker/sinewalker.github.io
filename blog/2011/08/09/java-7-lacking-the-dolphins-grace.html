<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Java 7 is here - but it's lacking the dolphin's grace | Milosophical Me</title>

                <link href="../../../../assets/css/bitter.css" rel="stylesheet" type="text/css">
        <link href="../../../../assets/css/main.css" rel="stylesheet" type="text/css">
        <link href="../../../../assets/css/rst.css" rel="stylesheet" type="text/css">
        <link href="../../../../assets/css/code.css" rel="stylesheet" type="text/css">
        <link href="../../../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
        <link href="../../../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">

                <link rel="alternate" type="application/rss+xml" title="RSS" href="../../../../rss.xml">

      <link rel="canonical" href="http://milosophical.me/blog/2011/08/09/java-7-lacking-the-dolphins-grace.html">



    
        <!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]-->

    

    
    <meta name="author" content="Mike Lockhart">
        <meta property="og:site_name" content="Milosophical Me">
    <meta property="og:title" content="Java 7 is here - but it's lacking the dolphin's grace">
    <meta property="og:url" content="http://milosophical.me/blog/2011/08/09/java-7-lacking-the-dolphins-grace.html">
    <meta property="og:description" content="Well, after 5 years and the setting of the Sun, Java SE 1.7 (originally code-named &quot;dolphin&quot;) has finally been released. Joyous celebrations from the land of Duke.






There's much that has been lon">
    <meta property="og:type" content="article">
    <meta property="article:published_time" content="2011-08-09T22:38:54+10:00">
           <meta property="article:tag" content="hacking">
           <meta property="article:tag" content="java">
           <meta property="article:tag" content="rant">

    
    

</head>
<body>
    <section class="social">
        <ul>
                    <li><a href="../../../../index.html" title="Home"><i class="icon-compass"></i></a></li>
            <li><a href="../../../../archive/archive.html" title="Archive"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="../../../../tags/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="../../../../pg/index.html" title="Codex"><i class="icon-book"></i></a></li>
            <li><a href="../../../../rss.xml" title="RSS"><i class="icon-rss"></i></a></li>
            <li><a href="https://plus.google.com/+MichaelLockhart/posts" title="Microblog"><i class="icon-google-plus"></i></a></li>
            <li><a href="https://www.linkedin.com/in/mikelockhart" title="My LinkedIn profile"><i class="icon-linkedin"></i></a></li>
            <li><a href="https://bitbucket.com/sinewalker" title="My Bitbucket"><i class="icon-bitbucket"></i></a></li>
            <li><a href="https://github.com/sinewalker" title="My Github"><i class="icon-github"></i></a></li>
            <li><a href="http://stackoverflow.com/users/776953/mike" title="Stack Overflow"><i class="icon-stackexchange"></i></a></li>

        </ul>
    </section>
    <section class="page-content">
        <div class="content" rel="main">
    <div class="post">
        <h1 class="p-name entry-title" itemprop="headline name">Java 7 is here - but it's lacking the dolphin's grace</h1>

        <div class="meta">
            <div class="authordate">
                <time class="timeago" datetime="2011-08-09T22:38:54+10:00">2011-08-09 22:38</time>
            
                      |  
        <a href="java-7-lacking-the-dolphins-grace.wp" id="sourcelink">Source</a>

            </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="../../../../tags/hacking.html" rel="tag">hacking</a></li>
           <li><a class="tag p-category" href="../../../../tags/java.html" rel="tag">java</a></li>
           <li><a class="tag p-category" href="../../../../tags/rant.html" rel="tag">rant</a></li>
        </ul>
        </div>

        </div>
        <div class="body">
            <p>Well, after 5 years and the setting of the Sun, Java SE 1.7 (originally code-named "dolphin") has finally been released. Joyous celebrations from the land of Duke.</p>


<!-- TEASER_END -->


<p>
There's much that has been long looked for in this release, and I'm happy about it — especially the nio.2 filesystem API and the improved support on the platform for scripting languages and dynamic languages. But the "improvements" to the Java language itself only highlight to me that this language is pretty well into zombie status (it's dead and yet it keeps trying to live and eat more developers' brains).
</p>

<p>
Take this enhancement to the language that finally allows you to do a switch on Strings. This bit of syntactic sugar has been on my own wish list since 1997 (when I first started to play with Java and discovered you couldn't switch on Strings). But of course, the bureaucrats have bodged it. Look at this code:
</p>


<pre>
public class StringSwitch {
    public static String getFruitColour(String name) {
        switch (name) {
        case "apple":
        case "raspberry":
        case "strawberry":
            return "Red";
        case "banana":
        case "lemmon":
            return "Yellow";
        case "kiwi":
        case "grapes":
        case "lime":
            return "Green";
        case "orange":
        case "pawpaw":
            return "Orange";
        default:
            return "Unknown";
        }
    }

    public static void main(String[] args) {
        System.out.println(getFruitColour("guava"));  // should fall through to default
        System.out.println(getFruitColour(null));     // actually causes NPE at the switch
    }
}
</pre>

<p>
This should work, and the null string should cause the switch to fall through. Seems reasonable, yes? Well, no. You get an NPE:

</p>
<blockquote>

<pre>$ <strong>java StringSwitch</strong>

Unknown

Exception in thread "main" java.lang.NullPointerException
	at StringSwitch.getFruitColour(StringSwitch.java:4)
	at StringSwitch.main(StringSwitch.java:26)</pre>
</blockquote>
<p>
Damn it, guys! How does this make my coding simpler? Now I have to remember that if I'm switching on String, I have to guard against NPEs. Okay, it's better than nested <code>if</code>'s, but it's a serious gotcha. Again. Here's one solution, though of course, being Java, it's fugly:


</p>
<pre>
public class StringSwitch {
    public static String getFruitColour(String name) {
        if (name != null) {
            switch (name) {
                case "apple":
                case "raspberry":
                case "strawberry":
                    return "Red";
                case "banana":
                case "lemmon":
                    return "Yellow";
                case "kiwi":
                case "grapes":
                case "lime":
                    return "Green";
                case "orange":
                case "pawpaw":
                    return "Orange";
                default:
                    return "Unknown";
            }
        } else {
            return "Unknown (NULL)"; // bleah.
        }
    }

    public static void main(String[] args) {
        System.out.println(getFruitColour("guava"));  // should fall through to default
        System.out.println(getFruitColour(null));     // this time the NPE is guarded
    }
}
</pre>
<p>
If anything, Java 7 demonstrates that the JVM is a great platform for dynamic languages other than Java. Like for instance Scala and Clojure... How disappointing.
</p>

        </div>
                <ul class="pager">
            <li class="previous">
                <a href="../../03/17/using-emacs-easypg-in-text-terminals.html" rel="prev" title="Using Emacs' EasyPG in text terminals">Previous post</a>
            </li>
            <li class="next">
                <a href="../../11/30/curious-cursor-complication-with-emacs-and-windows-magnifier.html" rel="next" title="Curious cursor complication with Emacs and Windows Magnifier">Next post</a>
            </li>
        </ul>

                    <script src="https://apis.google.com/js/plusone.js"></script>
<div class="g-comments" data-href="http://milosophical.me/blog/2011/08/09/java-7-lacking-the-dolphins-grace.html" data-first_party_property="BLOGGER" data-view_type="FILTERED_POSTMOD">
</div>


    </div>
                    <footer id="footer" role="contentinfo">
            <p></p>
<hr>Contents Copyright © 
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
<img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png"></a> 2005 — 2015         <a href="mailto:sinewalker@gmail.com">Mike Lockhart</a>. Powered by <a href="http://getnikola.com" rel="nofollow">Nikola</a> with <a href="https://github.com/getnikola/nikola-themes/tree/master/v7/zen-ipython">Zen-IPython</a> theme.
            
        </footer>

        </div>
    </section>
    <script>  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');  ga('create', 'UA-65364237-1', 'auto');  ga('send', 'pageview');</script>
    
                <script src="../../../../assets/js/jquery-1.10.2.min.js" type="text/javascript"></script>
            <script src="../../../../assets/js/jquery.timeago.js" type="text/javascript"></script>
        <script src="../../../../assets/js/mathjax.js" type="text/javascript"></script>
    
<!-- Social buttons -->
<div id="addthisbox" class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_more">Share</a>
<ul>
<li>
<a class="addthis_button_facebook"></a>
</li>
<li>
<a class="addthis_button_google_plusone_share"></a>
</li>
<li>
<a class="addthis_button_linkedin"></a>
</li>
<li>
<a class="addthis_button_twitter"></a>
</li>
</ul>
</div>
<script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7088a56bb93798"></script>
<!-- End of social buttons -->


        <script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
