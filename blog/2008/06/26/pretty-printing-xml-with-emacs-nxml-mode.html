<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Pretty-printing XML with Emacs' NXML-mode | Milosophical Me</title>

                <link href="../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">

                <link rel="alternate" type="application/rss+xml" title="RSS" href="../../../../rss.xml">

      <link rel="canonical" href="http://milosophical.me/blog/2008/06/26/pretty-printing-xml-with-emacs-nxml-mode.html">



    
        <!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]-->

    

    
    <meta name="author" content="Mike Lockhart">
        <meta name="og:title" content="Pretty-printing XML with Emacs' NXML-mode">
    <meta name="og:url" content="http://milosophical.me/blog/2008/06/26/pretty-printing-xml-with-emacs-nxml-mode.html">
    <meta name="og:description" content="Did you ever get a stream of XML out of a log file, or in a data stream, and it's all mashed together without line-breaks so that it just appears as gobble-de-gook? If there's a data error (not an XML">
    <meta name="og:site_name" content="Milosophical Me">
    <meta name="og:type" content="article">

    
    

</head>
<body>
    <section class="social">
        <ul>
                    <li><a href="../../../../index.html" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="../../../../archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="../../../../categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="../../../../rss.xml" title="RSS"><i class="icon-rss"></i></a></li>
            <li><a href="https://www.linkedin.com/in/mikelockhart" title="My LinkedIn profile"><i class="icon-linkedin"></i></a></li>
            <li><a href="https://bitbucket.com/sinewalker" title="My Bitbucket"><i class="icon-bitbucket"></i></a></li>
            <li><a href="https://github.com/sinewalker" title="My Github"><i class="icon-github"></i></a></li>
            <li><a href="https://plus.google.com/+MichaelLockhart" title="Michael+"><i class="icon-google-plus"></i></a></li>
            <li><a href="http://stackoverflow.com/users/776953/mike" title="Stack Overflow"><i class="icon-stackexchange"></i></a></li>

        </ul>
    </section>
    <section class="page-content">
        <div class="content" rel="main">
    <div class="post">
        <h1 class="p-name entry-title" itemprop="headline name">Pretty-printing XML with Emacs' NXML-mode</h1>

        <div class="meta">
            <div class="authordate">
                <time class="timeago" datetime="2008-06-26T12:46:03+10:00">2008-06-26 12:46</time>
            
                      |  
        <a href="pretty-printing-xml-with-emacs-nxml-mode.wp" id="sourcelink">Source</a>

            </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="../../../../categories/xhtml.html" rel="tag">XHTML</a></li>
           <li><a class="tag p-category" href="../../../../categories/code.html" rel="tag">code</a></li>
           <li><a class="tag p-category" href="../../../../categories/emacs.html" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="../../../../categories/geek.html" rel="tag">geek</a></li>
           <li><a class="tag p-category" href="../../../../categories/hacking.html" rel="tag">hacking</a></li>
           <li><a class="tag p-category" href="../../../../categories/lisp.html" rel="tag">lisp</a></li>
           <li><a class="tag p-category" href="../../../../categories/tip.html" rel="tag">tip</a></li>
        </ul>
        </div>

        </div>
        <div class="body">
            <p>Did you ever get a stream of XML out of a log file, or in a data stream, and it's all mashed together without line-breaks so that it just appears as gobble-de-gook? If there's a data error (not an XML parsing error) then you have to read it so that you can find where the error is, but you don't have XML-spy and NetBeans is overkill or takes forever to fire up...


Emacs to the rescue! <a title="Benjamin Ferrari's blog (seems to lack an " href="http://blog.bookworm.at/">Benjamin Ferrari</a> wrote this <em>increadibly useful</em> (and simple) <a title="Benjamin Ferrari's original blog post for below code" href="http://blog.bookworm.at/2007/03/pretty-print-xml-with-emacs.html">elisp function</a> to pretty-print a block of XML code:

</p>
<pre><!--more-->(defun bf-pretty-print-xml-region (begin end)
  "Pretty format XML markup in region. You need to have nxml-mode
<a title="NXML-mode home-page" href="http://www.emacswiki.org/cgi-bin/wiki/NxmlMode">http://www.emacswiki.org/cgi-bin/wiki/NxmlMode</a> installed to do

this.  The function inserts linebreaks to separate tags that have

nothing but whitespace between them.  It then indents the markup

by using nxml's indentation rules."
  (interactive "r")
  (save-excursion
      (nxml-mode)
      (goto-char begin)
      (while (search-forward-regexp "\&gt;[ \\t]*\&lt;" nil t)
        (backward-char) (insert "\n"))
      (indent-region begin end))
    (message "Ah, much better!"))</pre>
Indeed, why isn't this included with NXML-mode?  Ah well, at least my problem's solved for the simple use-case of opening a machine-generated XML file and wanting to visually parse it...



Benjamin's blog has lots of useful Emacs stuff. <a title="Benjamin's intro essay to his emacs hacks, and why anyone might care" href="http://blog.bookworm.at/2007/03/introduction-to-all-these-emacs.html">Worth a read</a>.
        </div>
                <ul class="pager">
            <li class="previous">
                <a href="../18/solaris-x11-and-dvorak-simplified-keyboard-layout.html" rel="prev" title="Solaris X11 and Dvorak simplified keyboard layout">Previous post</a>
            </li>
            <li class="next">
                <a href="../27/unicode-chars-between-emacsx11-cygwin-and-win32.html" rel="next" title="Unicode chars between Emacs/X11 cygwin and Win32">Next post</a>
            </li>
        </ul>

                    <script src="https://apis.google.com/js/plusone.js"></script>
<div class="g-comments" data-href="http://milosophical.me/blog/2008/06/26/pretty-printing-xml-with-emacs-nxml-mode.html" data-first_party_property="BLOGGER" data-view_type="FILTERED_POSTMOD">
</div>


    </div>
                    <footer id="footer" role="contentinfo">
            <p>Contents <a href="http://creativecommons.org/licenses/by-sa/4.0/">copyright</a> © 2005 — 2015         <a href="mailto:sinewalker@gmail.com">Mike Lockhart</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         , hosted at <a href="https://pages.github.com/sinewalker">GitHub Pages</a></p>
            
        </footer>

        </div>
    </section>
    
    
                <script src="../../../../assets/js/all-nocdn.js" type="text/javascript"></script>
    
<!-- Social buttons -->
<div id="addthisbox" class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_more">Share</a>
<ul>
<li>
<a class="addthis_button_facebook"></a>
</li>
<li>
<a class="addthis_button_google_plusone_share"></a>
</li>
<li>
<a class="addthis_button_linkedin"></a>
</li>
<li>
<a class="addthis_button_twitter"></a>
</li>
</ul>
</div>
<script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7088a56bb93798"></script>
<!-- End of social buttons -->


        <script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
