<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/"><channel><title>Milosophical Me (desktop)</title><link>http://milosophical.me/</link><description></description><language>en</language><lastBuildDate>Sat, 31 Jan 2015 22:30:13 GMT</lastBuildDate><generator>http://getnikola.com/</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Awesome KDE, Java composite hacks</title><link>http://milosophical.me/blog/2010/07/05/awesome-kde-java-composite-hacks.html</link><dc:creator>Mike Lockhart</dc:creator><description>&lt;p&gt;I've been experimenting with the &lt;a title="This is gonna be LEGEN ... wait for it ... DARY" href="http://awesome.naquadah.org/"&gt;awesome&lt;/a&gt; &lt;a title="Wikipedia" href="http://en.wikipedia.org/wiki/Tiling_window_manager"&gt;tiling window manager&lt;/a&gt; as a replacement to KDE's &lt;a title="Wikipedia" href="http://en.wikipedia.org/wiki/KWin"&gt;kwin&lt;/a&gt;, and I've managed to hack together a recipe for getting them up an running. It's surprisingly simple, although the learing curve was a little steep.


This post documents what I've done to get things working nicely with the basic awesome config. No customisations here, see the &lt;a title="Awesome's wiki" href="http://awesome.naquadah.org/wiki/Main_Page"&gt;awesome wiki&lt;/a&gt; for some &lt;a title="Customising Awesome" href="http://awesome.naquadah.org/wiki/Main_Page#Customization"&gt;ideas&lt;/a&gt;.

&lt;!--more--&gt;

&lt;/p&gt;&lt;h2&gt;Rationale&lt;/h2&gt;

After living in emacs for a few years I've come to appreciate it's &lt;a title="What's LCARS?" href="http://memory-alpha.org/wiki/LCARS"&gt;LCARS&lt;/a&gt; style of window panels, so I started to investigate arranging windows at a more global level in my X desktop. I discovered &lt;a title="Wikipedia" href="http://en.wikipedia.org/wiki/Tiling_window_manager"&gt;tiling window managers&lt;/a&gt; and started researching them. I decided I want a light-weight, no-fuss tiling window manager for many reasons, not least being that overlapping windows become a mess, and the computer should really be taking care of arranging windows for me.  So I investigated several, narrowing down to &lt;a title="Written in Haskel, not too bad" href="http://xmonad.org"&gt;xmonad&lt;/a&gt;, &lt;a title="Window Manager Improved 2" href="http://wmii.suckless.org"&gt;wmii&lt;/a&gt; and finally settling on &lt;a title="This is gonna be LEGEN ... wait for it ... DARY" href="http://awesome.naquadah.org/"&gt;awesome&lt;/a&gt;.



However I still like the general KDE environment with all it's facilities like &lt;a title="The semantic desktop" href="http://nepomuk.semanticdesktop.org/xwiki/bin/view/Main1/"&gt;Nepomuk&lt;/a&gt;, &lt;a title="Plasma" href="http://plasma.kde.org/"&gt;Plasma&lt;/a&gt;, the &lt;a title="KDE Desktop COmmunications Protocol" href="http://developer.kde.org/documentation/other/dcop.html"&gt;DCOP&lt;/a&gt;, knotify  integration, &lt;a title="KDE Plasma desktop Run Command" href="http://userbase.kde.org/Plasma/Krunner"&gt;krunner&lt;/a&gt;, hooks to Firefox and the trash can and so on -- all tools I can't live without. So I don't want to give  up KDE altogether just to have a better window manager. What I really want to do is run the KDE environment, but use awesome instead of kwin to manage my windows. If I can keep the eye-candy of transparent windows then that'd be a bonus.



After a week-end of research and hacking, here are my results.

&lt;h2&gt;Installing awesome&lt;/h2&gt;

This is a cinch on openSUSE, and probably also on most distro's.  In openSUSE I just used the &lt;a title="Webpin integrated into Yast" href="http://en.opensuse.org/YaST/Research/YaST_Interface_for_Webpin"&gt;Webpin&lt;/a&gt; module in YaST to find &lt;a title="awesome packages in the OBS" href="https://build.opensuse.org/search/search"&gt;a package&lt;/a&gt; on the &lt;a title="OpenSUSE Build Service - for end-users, this is akin to Ubunto/Debian Universe" href="https://build.opensuse.org/"&gt;OBS&lt;/a&gt; and then installed that directly from the Webpin module, which added the repository and downloaded and installed the packages for me.



Once installed, this gives an additional Session type on the kdm login screen, which is neat for testing or using awesome by itself, but when you launch KDE it's still the same (as you would expect!)

&lt;h2&gt;Replacing the KDE window manager&lt;/h2&gt;

After some searching on a few forums I found that KDE's window manager can be set by putting the following into a script in the per-user KDE environment directory (&lt;code&gt;~/.kde4/env&lt;/code&gt; for KDE4)

&lt;p style="padding-left:30px;"&gt;&lt;code&gt;KDEWM=/usr/bin/awesome&lt;/code&gt;&lt;/p&gt;

This has the advantage that it only affects you, not everyone on the system who runs KDE.  Also it's easy to turn off and get the original kwin back if you want to.  I may look into adding KDE+awesome as a session type and then having a separate section in my &lt;code&gt;~/.xinitrc&lt;/code&gt; in the future if I'll be swapping back more often.  I don't anticipate it today though.

&lt;h2&gt;Fixing Java&lt;/h2&gt;

There is a &lt;a title="Java reparinting window bug" href="http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6429775"&gt;bug&lt;/a&gt; in Java 1.5 and 1.6 where it makes protocol assumptions that are not true in non-reparanting window managers (something along those lines anyway).  It results in Java GUIs appearing as just a grey box in certain window managers like xgl, dwm, wmii, xmonad and awesome. &lt;a title="awesome tip to fix grey Java windows" href="http://awesome.naquadah.org/wiki/Problems_with_Java"&gt;Apparently&lt;/a&gt; this'll be fixed in Java 1.7. In the mean-time, to fix it for 1.5 and 1.6 you can install a utility called &lt;a title="wmname" href="http://tools.suckless.org/wmname"&gt;wmname&lt;/a&gt; (I used Webpin again) and then put this in a script to run at start-up (i.e. in &lt;code&gt;~/.kde4/Autostart&lt;/code&gt;)

&lt;pre style="padding-left:30px;"&gt;&lt;code&gt;#!/bin/sh

/usr/bin/wmname LG3D

&lt;/code&gt;&lt;/pre&gt;

The "LG3D" window manager name above is one of the strings that 1.5 and 1.6 JVMs look for and change their behavior if found. This value is the name of the&lt;a title="Wikipedia" href="http://en.wikipedia.org/wiki/Project_Looking_Glass"&gt; LookingGlass3D&lt;/a&gt; window manager, by Sun. Appreciate the irony...

&lt;h2&gt;Composite effects (transparency and shadows)&lt;/h2&gt;

I found &lt;a title="explains xcompmgr and setting it up" href="http://wiki.archlinux.org/index.php/Xcompmgr"&gt;this link&lt;/a&gt; on the ArchLinux wiki. It's very useful and describes how to enable &lt;a title="Enabling composite extension in Xorg 7.1+" href="http://wiki.archlinux.org/index.php/Composite"&gt;composite&lt;/a&gt; effects by default in your Xorg, and includes a &lt;a title="start/stop xcompmgr" href="http://wiki.archlinux.org/index.php/Xcompmgr#Starting.2FStopping_xcompmgr_on_Demand"&gt;script&lt;/a&gt; to turn effects on and off (quite useful on my aging AthlonXP  + Radeon, which can &lt;em&gt;only just&lt;/em&gt; handle the effects, but works nice and snappy without them).



With all this done I have a nice stable and useful desktop which I can begin to tweak when I get a chance to play with the Lua language that Awesome is configured with. More toys to play with :)</description><category>KDE</category><category>awesome</category><category>desktop</category><category>geek</category><category>hacking</category><category>how-to</category><category>useability</category><category>xcompmgr</category><guid>http://milosophical.me/blog/2010/07/05/awesome-kde-java-composite-hacks.html</guid><pubDate>Mon, 05 Jul 2010 04:54:32 GMT</pubDate></item><item><title>MS-Windows focus-follows-mouse Registry hacks</title><link>http://milosophical.me/blog/2010/03/10/ms-windows-focus-follows-mouse-registry-hacks.html</link><dc:creator>Mike Lockhart</dc:creator><description>&lt;p&gt;I like the "focus follows mouse" window-focussing model from X11, because
&lt;/p&gt;&lt;ul&gt;
	&lt;li&gt;I don't have to click on the window, just move the mouse and the window it's over is focussed&lt;/li&gt;
	&lt;li&gt;I can focus a window &lt;em&gt;without&lt;/em&gt; bringing it to the front, which is sometimes handy. If I want it in front, I can click it.&lt;/li&gt;
&lt;/ul&gt;

However MS-Windows follows the old-fashioned, Macintosh/Smalltalk style of having users click on a window to focus it for the keyboard. How do you make MS-Windows behave more like X11?



&lt;!--more--&gt;I used to install &lt;strong&gt;TweakUI &lt;/strong&gt;from Microsoft, just so that I could turn on an X11-like focus-follows-mouse mode, but Microsoft don't make TweakUI for Vista (there is &lt;strong&gt;TweakVI &lt;/strong&gt;instead, if you want to Google for it. It's by some other company. It's not bad, but overkill for what I want to do).



In Vista, Microsoft added a GUI for this mode that's &lt;em&gt;almost&lt;/em&gt; what I want. You can do this:



Open Control Panel (new view, not Classic)

&lt;p style="padding-left:30px;"&gt;&amp;gt; Ease of Access Center&lt;/p&gt;

&lt;p style="padding-left:60px;"&gt;&amp;gt; Make the mouse easier to use&lt;/p&gt;

&lt;p style="padding-left:90px;"&gt;&amp;gt; [ ] Activate a window by hovering over it with the mouse&lt;/p&gt;

But this also brings the window to the front when it's focussed.  If that's what you want, then you're done. If you're like me and you want the window under the mouse to have keyboard focus, but you &lt;em&gt;don't&lt;/em&gt; want it brought to the front without clicking on it, you'll need to hack the Windows Registry. Here are some steps, which should be good for any release of Windows that is based on Windows NT (NT, 2000, XP, Vista, Win7):

&lt;ol&gt;
	&lt;li&gt;Run &lt;strong&gt;regedit &lt;/strong&gt;(Win+R, regedit, OK)&lt;/li&gt;
	&lt;li&gt;Open up the key &lt;strong&gt;HKEY_CURRENT_USER\Control Panel\Mouse&lt;/strong&gt;&lt;/li&gt;
	&lt;li&gt;Change the value of the REG_DWORD &lt;strong&gt;ActiveWindowTracking&lt;/strong&gt; to 0x0000001 (1)&lt;/li&gt;
	&lt;li&gt;Open up the key &lt;strong&gt;HKEY_CURRENT_USER\Control Panel\Desktop&lt;/strong&gt;&lt;/li&gt;
	&lt;li&gt;&lt;strong&gt;Logical OR&lt;/strong&gt; the first byte of the REG_BINARY &lt;strong&gt;UserPreferencesMask&lt;/strong&gt; with &lt;strong&gt;0&lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;&lt;strong&gt;1&lt;/strong&gt;.  That is, if the current value is df 3e 03 80 12 00 00 00, then leave the 'df' alone. If it's 9&lt;strong&gt;&lt;em&gt;e&lt;/em&gt;&lt;/strong&gt; 03 07 80 12 00 00 00 , change it to 9&lt;strong&gt;&lt;em&gt;f&lt;/em&gt; &lt;/strong&gt;.. ..  and so on &lt;strong style="color:#7744ee;"&gt;*&lt;/strong&gt;&lt;/li&gt;
	&lt;li&gt;To make the focus a little slower, so that pop-up windows are useable, you also want to change the focus timing. Change the REG_DWORD &lt;strong&gt;ActiveWindTrkTimeout&lt;/strong&gt; (also in HKEY_CURRENT_USER\Control Panel\Desktop) to the number of milliseconds to wait before focus shifts to the window under the mouse.  I like a value of 0x00000080 (128ms). You might like 200ms (c8), or some faster or slower value.&lt;/li&gt;
&lt;/ol&gt;

&lt;strong style="color:#7744ee;"&gt;*&lt;/strong&gt; If you can't do this hexadecimal bit twiddling math in your head (difficult if you're not a programmer), then Windows' Calc can do it for you: put it in Programmer and Hex modes, type the first byte (hex pair e.g. 9e), press the 'Or' button, then '1' and the '=' button.  If the number changes, that's what you replace the first byte with. Thanks to Erik in the comments below, I've finally figured this out and (I hope) clarified what to do..



So, in summary, the Registry keys are as follows for X11-like window focus:

&lt;pre&gt;HKEY_CURRENT_USERS\Control Panel\Mouse

  REG_DWORD ActiveWindowTracking = 0x00000001  (1)

HKEY_CURRENT_USERS\Control Panel\Desktop

  REG_DWORD ActiveWindTrkTimeout = 0x00000080  (128)

  REG_BINARY UserPreferencesMask OR= 01 .. .. .. .. .. .. .. ..&lt;/pre&gt;

These registry hacks require a reboot to take effect.</description><category>desktop</category><category>geek</category><category>hacking</category><category>how-to</category><category>tip</category><category>useability</category><category>windows</category><category>x11</category><guid>http://milosophical.me/blog/2010/03/10/ms-windows-focus-follows-mouse-registry-hacks.html</guid><pubDate>Wed, 10 Mar 2010 03:42:26 GMT</pubDate></item></channel></rss>